{% if site.footer_scripts %}
  {% for script in site.footer_scripts %}
    <script src="{{ script | relative_url }}"></script>
  {% endfor %}
{% else %}
  <script src="{{ '/assets/js/main.min.js' | relative_url }}"></script>
{% endif %}

{% if site.after_footer_scripts %}
  {% for script in site.after_footer_scripts %}
    <script src="{{ script | relative_url }}"></script>
  {% endfor %}
{% endif %}

<!-- Explicitly load jQuery if not already loaded by main.min.js -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script>
  $(document).ready(function () {
    // Cookie Consent
    if (document.cookie.indexOf('cookie_consent=true') === -1) {
      $('#cookie-consent-banner').show();
    }

    $('#accept-cookies').click(function () {
      document.cookie = 'cookie_consent=true; expires=' + new Date(new Date().getTime() + 24 * 60 * 60 * 1000).toUTCString() + '; path=/';
      $('#cookie-consent-banner').hide();
    });

    // Smooth scroll
    $('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click(function (event) {
      if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
        if (target.length) {
          event.preventDefault();
          $('html, body').animate({
            scrollTop: target.offset().top
          }, 1000, function () {
            var $target = $(target);
            $target.focus();
            if ($target.is(":focus")) {
              return false;
            } else {
              $target.attr('tabindex', '-1');
              $target.focus();
            }
          });
        }
      }
    });

    // Read More / Read Less functionality
    $('.read-more-btn').click(function (e) {
      e.preventDefault();
      var targetId = $(this).data('target');
      var $targetContent = $('#' + targetId);
      if ($targetContent.is(':visible')) {
        $targetContent.slideUp();
        $(this).text('Read More');
      } else {
        $targetContent.slideDown();
        $(this).text('Read Less');
      }
    });

    AOS.init(); // AOS initialization moved inside $(document).ready()
  });
</script>

{% include footer/custom.html %}